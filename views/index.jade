extends layout

block content
  style
    html, body {
      width:  100%;
      height: 100%;
    }
    body {
      margin: 0px;
      padding: 0px;
    }
    #container {
      background: white;
      position:fixed;
      width: 864px;
      heigh: 694px;
      top: 40px;
      left: 50%;
      margin-left: -432px;
    }
    .foreground {
      z-index: 100
    }


  //- canvas#background
  #container.foreground

block javascript_content
  script(src="/bootstrap/js/bootstrap.js")
  script(src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.3.js")
  script(src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js")
  //- script(src="http://remote-tilt.com/js/device-motion-polyfill.js?key=tw_yow_game")
  script(src="canvg-1.2/rgbcolor.js")
  script(src="canvg-1.2/canvg.js")

  != js('radar')
  != js('marble')
  != js('technology_generator')
  != js('game_timer')

  script
    $(function() { 
      container = $('#container')
      radar = new Radar({ 
        width: 864, 
        height: 694
      });

      $(radar.backgroundLayer.getCanvas().element).attr('id', 'backgroundLayer');
      canvg('backgroundLayer', 'radar.svg', { ignoreMouse: true, ignoreAnimation: true }) 

      $.getJSON('/data', function(data) {
        var generator = new TechnologyGenerator(data);
        var technology = generator.get_random_technology();
        radar.draw_marble(technology)
      });
      new GameTimer().start_timer(10);

      window.radar = radar;
    });
